(this["webpackJsonpreact_redux-list-of-posts"]=this["webpackJsonpreact_redux-list-of-posts"]||[]).push([[0],{22:function(t,e,n){},23:function(t,e,n){},24:function(t,e,n){},26:function(t,e,n){},27:function(t,e,n){},28:function(t,e,n){},29:function(t,e,n){"use strict";n.r(e);var c=n(8),r=n.n(c),a=n(4),s=n(13),o=n(3),i=n(2),u=n.n(i),p=n(7),d="https://mate.academy/students-api/";function l(){return b.apply(this,arguments)}function b(){return(b=Object(o.a)(u.a.mark((function t(){var e;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(d,"/users"));case 2:return e=t.sent,t.abrupt("return",e.json());case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var j,f="https://mate.academy/students-api/";function m(t){return O.apply(this,arguments)}function O(){return(O=Object(o.a)(u.a.mark((function t(e){var n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(f,"/posts?userId=").concat(e));case 2:if((n=t.sent).ok){t.next=5;break}throw new Error("".concat(n.status," - ").concat(n.statusText));case 5:return t.abrupt("return",n.json());case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function h(t){return x.apply(this,arguments)}function x(){return(x=Object(o.a)(u.a.mark((function t(e){var n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(f,"/posts/").concat(e));case 2:return n=t.sent,t.abrupt("return",n.json());case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function _(){return v.apply(this,arguments)}function v(){return(v=Object(o.a)(u.a.mark((function t(){var e;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(f,"/posts"));case 2:return e=t.sent,t.abrupt("return",e.json());case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function S(t){return E.apply(this,arguments)}function E(){return(E=Object(o.a)(u.a.mark((function t(e){var n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(f,"/posts/").concat(e),{method:"DELETE"});case 2:return n=t.sent,t.abrupt("return",n);case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}!function(t){t.SET_POSTS="SET_POSTS",t.SET_ALL_POSTS="SET_ALL_POSTS",t.SET_USERS="SET_USERS",t.SET_COMMENTS="SET_COMMENTS",t.SET_CURRENT_USER="SET_CURRENT_USER",t.SET_SELECTED_POST_ID="SET_SELECTED_POST_ID",t.SET_ISLOADING="SET_ISLOADING",t.SET_POST_TITLE="SET_POST_TITLE"}(j||(j={}));var T=Object(p.b)(j.SET_POSTS),y=Object(p.b)(j.SET_COMMENTS),w=Object(p.b)(j.SET_CURRENT_USER),N=Object(p.b)(j.SET_SELECTED_POST_ID),C=Object(p.b)(j.SET_ISLOADING),L=Object(p.b)(j.SET_POST_TITLE),P=Object(p.c)(j.SET_USERS,Object(o.a)(u.a.mark((function t(){var e;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l();case 2:return e=t.sent,t.abrupt("return",e);case 4:case"end":return t.stop()}}),t)})))),k=Object(p.c)(j.SET_ALL_POSTS,Object(o.a)(u.a.mark((function t(){var e;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,_();case 2:return e=t.sent,t.abrupt("return",e);case 4:case"end":return t.stop()}}),t)})))),g=Object(p.d)({posts:[],users:[],comments:[],currentUser:"0",selectedPostId:0,isLoading:!1,posttitle:""},(function(t){t.addCase(T,(function(t,e){t.posts=e.payload})),t.addCase(y,(function(t,e){t.comments=e.payload})),t.addCase(w,(function(t,e){t.currentUser=e.payload})),t.addCase(N,(function(t,e){t.selectedPostId=e.payload})),t.addCase(C,(function(t,e){t.isLoading=e.payload})),t.addCase(L,(function(t,e){t.posttitle=e.payload})),t.addCase(P.pending,(function(t){t.isLoading=!0})),t.addCase(P.fulfilled,(function(t,e){t.users=e.payload,t.isLoading=!1})),t.addCase(k.pending,(function(t){t.isLoading=!0})),t.addCase(k.fulfilled,(function(t,e){t.posts=e.payload,t.isLoading=!1}))})),I=Object(p.a)({reducer:g}),D=n(0),A=(n(22),n(23),n(24),function(t){return t.users}),U=function(t){return t.posts},R=function(t){return t.comments},F=function(t){return t.currentUser},M=function(t){return t.selectedPostId},q=function(t){return t.isLoading},G=function(t){return t.posttitle},J=n(1),X=function(){var t=Object(a.b)(),e=Object(a.c)(F),n=Object(a.c)(M),c=Object(a.c)(U),r=function(){var n=Object(o.a)(u.a.mark((function n(){var c;return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,m(e);case 2:c=n.sent,t(T(c)),t(C(!1));case 5:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();return Object(D.useEffect)((function(){r()}),[e]),Object(D.useEffect)((function(){t(k())}),[]),Object(J.jsx)("div",{className:"PostsList",children:Object(J.jsxs)(J.Fragment,{children:[Object(J.jsx)("h2",{children:"Posts:"}),Object(J.jsx)("ul",{className:"PostsList__list","data-cy":"postDetails",children:c.map((function(e){return Object(J.jsxs)("li",{className:"PostsList__item",children:[Object(J.jsxs)("div",{children:[Object(J.jsxs)("b",{children:["[User"," ",e.userId,"]:"," "]}),e.body]}),Object(J.jsx)("button",{type:"button",className:"PostsList__button button",onClick:function(){n===e.id?t(N(void 0)):t(N(e.id)),t(C(!0))},children:n===e.id?"Close":"Open"}),Object(J.jsx)("button",{type:"button",className:"PostsList__button button",onClick:Object(o.a)(u.a.mark((function n(){return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,S(e.id);case 2:t(k());case 3:case"end":return n.stop()}}),n)}))),children:"X"})]},e.id)}))})]})})},Y=n(6),B=(n(26),"https://mate.academy/students-api/");function H(t){return z.apply(this,arguments)}function z(){return(z=Object(o.a)(u.a.mark((function t(e){var n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(B,"/comments?postId=").concat(e));case 2:if((n=t.sent).ok){t.next=5;break}throw new Error("".concat(n.status," - ").concat(n.statusText));case 5:return t.abrupt("return",n.json());case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function K(t){return Q.apply(this,arguments)}function Q(){return(Q=Object(o.a)(u.a.mark((function t(e){var n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(B,"/comments/").concat(e),{method:"DELETE"});case 2:return n=t.sent,t.abrupt("return",n);case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function V(t,e,n,c){return W.apply(this,arguments)}function W(){return(W=Object(o.a)(u.a.mark((function t(e,n,c,r){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(B,"/comments"),{method:"POST",headers:{"Content-type":"application/json; charset=UTF-8"},body:JSON.stringify({postId:r,name:e,email:n,body:c})});case 2:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var Z=function(){var t=Object(a.b)(),e=Object(a.c)(R),n=Object(D.useState)(""),c=Object(Y.a)(n,2),r=c[0],s=c[1],i=Object(D.useState)(""),p=Object(Y.a)(i,2),d=p[0],l=p[1],b=Object(D.useState)(""),j=Object(Y.a)(b,2),f=j[0],m=j[1],O=Object(D.useState)(!1),h=Object(Y.a)(O,2),x=h[0],_=h[1],v=function(){var n=Object(o.a)(u.a.mark((function n(c){var r;return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!e){n.next=6;break}return V(c.name,c.email,c.body,c.postId),n.next=4,H(c.postId);case 4:r=n.sent,t(y(r));case 6:case"end":return n.stop()}}),n)})));return function(t){return n.apply(this,arguments)}}();return Object(J.jsxs)("form",{className:"NewCommentForm",onSubmit:function(t){if(t.preventDefault(),r&&d&&f&&e){var n={id:e.length+1,postId:e[0].postId,name:r,email:d,body:f};v(n),_(!1),s(""),l(""),m("")}else _(!0)},children:[Object(J.jsx)("div",{className:"form-field",children:Object(J.jsx)("input",{type:"text",name:"name",required:!0,placeholder:"Your name",value:r,className:"NewCommentForm__input",onChange:function(t){s(t.target.value)}})}),Object(J.jsx)("div",{className:"form-field",children:Object(J.jsx)("input",{type:"email",name:"email",required:!0,placeholder:"Your email",className:"NewCommentForm__input",value:d,onChange:function(t){l(t.target.value)}})}),Object(J.jsx)("div",{className:"form-field",children:Object(J.jsx)("textarea",{name:"body",placeholder:"Type comment here",className:"NewCommentForm__input",required:!0,value:f,onChange:function(t){m(t.target.value)}})}),x&&Object(J.jsx)("div",{style:{color:"red"},children:"Add correct data"}),Object(J.jsx)("button",{type:"submit",className:"NewCommentForm__submit-button button",children:"Add a comment"})]})},$=(n(27),function(){var t=Object(a.b)(),e=Object(a.c)(G),n=Object(a.c)(R),c=Object(a.c)(M),r=Object(D.useState)(!1),s=Object(Y.a)(r,2),i=s[0],p=s[1],d=function(){var e=Object(o.a)(u.a.mark((function e(){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!c){e.next=5;break}return e.next=3,h(c);case 3:n=e.sent,t(L(n.title));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),l=function(){var e=Object(o.a)(u.a.mark((function e(){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!c){e.next=5;break}return e.next=3,H(c);case 3:n=e.sent,t(y(n));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),b=function(){var t=Object(o.a)(u.a.mark((function t(e){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=4;break}return t.next=3,K(e);case 3:l();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(D.useEffect)((function(){t(C(!0)),d(),t(C(!1)),t(C(!0)),l(),t(C(!1))}),[c]),Object(J.jsxs)("div",{className:"PostDetails",children:[Object(J.jsx)("h2",{children:"Post details:"}),0!==c&&Object(J.jsxs)(J.Fragment,{children:[Object(J.jsx)("section",{className:"PostDetails__post",children:Object(J.jsx)("p",{children:e})}),Object(J.jsxs)("section",{className:"PostDetails__comments",children:[Object(J.jsx)("button",{type:"button",className:"button",onClick:function(){p(!i)},children:n&&(i?"Show ".concat(n.length," comments"):"Hide ".concat(n.length," comments"))}),Object(J.jsx)("ul",{className:i?"PostDetails__visiblelist":"PostDetails__list",children:n&&n.map((function(t){return Object(J.jsxs)("li",{className:"PostDetails__list-item",children:[Object(J.jsx)("button",{type:"button",className:"PostDetails__remove-button button",onClick:function(){b(t.id)},children:"X"}),Object(J.jsx)("p",{children:t.body})]},t.id)}))})]}),Object(J.jsx)("section",{children:Object(J.jsx)("div",{className:"PostDetails__form-wrapper",children:Object(J.jsx)(Z,{})})})]})]})}),tt=(n(28),function(){return Object(J.jsx)("div",{className:"Loader",children:Object(J.jsx)("div",{className:"Loader__content"})})}),et=function(){var t=Object(a.b)(),e=Object(a.c)(A),n=Object(a.c)(q),c=Object(a.c)(F);return Object(D.useEffect)((function(){t(P())}),[]),Object(J.jsxs)("div",{className:"App",children:[Object(J.jsx)("header",{className:"App__header",children:Object(J.jsxs)("label",{children:["Select a user: \xa0",Object(J.jsxs)("select",{className:"App__user-selector",value:c,onChange:function(e){t(w(e.target.value)),t(C(!0))},children:[Object(J.jsx)("option",{value:"0",disabled:!0,children:"All users"}),e.map((function(t){return Object(J.jsx)("option",{value:"".concat(t.id),children:t.name},t.id)}))]})]})}),Object(J.jsxs)("main",{className:"App__main",children:[Object(J.jsxs)("div",{className:"App__sidebar",children:[n&&Object(J.jsx)(tt,{}),Object(J.jsx)(X,{})]}),Object(J.jsx)("div",{className:"App__content",children:"0"!==c?Object(J.jsx)($,{}):Object(J.jsx)("p",{children:"Choose user!"})})]})]})},nt=function(){return Object(J.jsx)(a.a,{store:I,children:Object(J.jsx)(s.a,{children:Object(J.jsx)(et,{})})})};r.a.render(Object(J.jsx)(nt,{}),document.getElementById("root"))}},[[29,1,2]]]);
//# sourceMappingURL=main.d8606efb.chunk.js.map