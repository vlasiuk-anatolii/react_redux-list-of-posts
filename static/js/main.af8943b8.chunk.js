(this["webpackJsonpreact_redux-list-of-posts"]=this["webpackJsonpreact_redux-list-of-posts"]||[]).push([[0],{22:function(t,e,n){},23:function(t,e,n){},24:function(t,e,n){},26:function(t,e,n){},27:function(t,e,n){},28:function(t,e,n){},29:function(t,e,n){"use strict";n.r(e);var c=n(8),r=n.n(c),a=n(4),s=n(13),o=n(3),i=n(2),u=n.n(i),d=n(7),p="https://mate.academy/students-api/";function l(){return b.apply(this,arguments)}function b(){return(b=Object(o.a)(u.a.mark((function t(){var e;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(p,"/users"));case 2:return e=t.sent,t.abrupt("return",e.json());case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var f="https://mate.academy/students-api/";function j(t){return m.apply(this,arguments)}function m(){return(m=Object(o.a)(u.a.mark((function t(e){var n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(f,"/posts?userId=").concat(e));case 2:if((n=t.sent).ok){t.next=5;break}throw new Error("".concat(n.status," - ").concat(n.statusText));case 5:return t.abrupt("return",n.json());case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function O(t){return h.apply(this,arguments)}function h(){return(h=Object(o.a)(u.a.mark((function t(e){var n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(f,"/posts/").concat(e));case 2:if((n=t.sent).ok){t.next=5;break}throw new Error("".concat(n.status," - ").concat(n.statusText));case 5:return t.abrupt("return",n.json());case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function x(){return _.apply(this,arguments)}function _(){return(_=Object(o.a)(u.a.mark((function t(){var e;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(f,"/posts"));case 2:if((e=t.sent).ok){t.next=5;break}throw new Error("".concat(e.status," - ").concat(e.statusText));case 5:return t.abrupt("return",e.json());case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function v(t){return S.apply(this,arguments)}function S(){return(S=Object(o.a)(u.a.mark((function t(e){var n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(f,"/posts/").concat(e),{method:"DELETE"});case 2:return n=t.sent,t.abrupt("return",n);case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var E,T="https://mate.academy/students-api/";function y(t){return w.apply(this,arguments)}function w(){return(w=Object(o.a)(u.a.mark((function t(e){var n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(T,"/comments?postId=").concat(e));case 2:if((n=t.sent).ok){t.next=5;break}throw new Error("".concat(n.status," - ").concat(n.statusText));case 5:return t.abrupt("return",n.json());case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function N(t){return C.apply(this,arguments)}function C(){return(C=Object(o.a)(u.a.mark((function t(e){var n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(T,"/comments/").concat(e),{method:"DELETE"});case 2:return n=t.sent,t.abrupt("return",n);case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function L(t,e,n,c){return k.apply(this,arguments)}function k(){return(k=Object(o.a)(u.a.mark((function t(e,n,c,r){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(T,"/comments"),{method:"POST",headers:{"Content-type":"application/json; charset=UTF-8"},body:JSON.stringify({postId:r,name:e,email:n,body:c})});case 2:case"end":return t.stop()}}),t)})))).apply(this,arguments)}!function(t){t.SET_POSTS="SET_POSTS",t.SET_ALL_POSTS="SET_ALL_POSTS",t.SET_USERS="SET_USERS",t.SET_COMMENTS="SET_COMMENTS",t.SET_CURRENT_USER="SET_CURRENT_USER",t.SET_SELECTED_POST_ID="SET_SELECTED_POST_ID",t.SET_ISLOADING="SET_ISLOADING",t.SET_POST_TITLE="SET_POST_TITLE"}(E||(E={}));var P=Object(d.b)(E.SET_POSTS),g=Object(d.b)(E.SET_CURRENT_USER),I=Object(d.b)(E.SET_SELECTED_POST_ID),D=Object(d.b)(E.SET_ISLOADING),A=Object(d.b)(E.SET_POST_TITLE),U=Object(d.c)(E.SET_USERS,Object(o.a)(u.a.mark((function t(){var e;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l();case 2:return e=t.sent,t.abrupt("return",e);case 4:case"end":return t.stop()}}),t)})))),R=Object(d.c)(E.SET_ALL_POSTS,Object(o.a)(u.a.mark((function t(){var e;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,x();case 2:return e=t.sent,t.abrupt("return",e);case 4:case"end":return t.stop()}}),t)})))),F=Object(d.c)(E.SET_COMMENTS,function(){var t=Object(o.a)(u.a.mark((function t(e){var n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,y(e);case 2:return n=t.sent,t.abrupt("return",n);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),M=Object(d.d)({posts:[],users:[],comments:[],selectedUserId:"0",selectedPostId:0,isLoading:!1,posttitle:""},(function(t){t.addCase(P,(function(t,e){t.posts=e.payload})),t.addCase(g,(function(t,e){t.selectedUserId=e.payload})),t.addCase(I,(function(t,e){t.selectedPostId=e.payload})),t.addCase(D,(function(t,e){t.isLoading=e.payload})),t.addCase(A,(function(t,e){t.posttitle=e.payload})),t.addCase(U.pending,(function(t){t.isLoading=!0})),t.addCase(U.fulfilled,(function(t,e){t.users=e.payload,t.isLoading=!1})),t.addCase(R.pending,(function(t){t.isLoading=!0})),t.addCase(R.fulfilled,(function(t,e){t.posts=e.payload,t.isLoading=!1})),t.addCase(F.pending,(function(t){t.isLoading=!0})),t.addCase(F.fulfilled,(function(t,e){t.comments=e.payload,t.isLoading=!1}))})),q=Object(d.a)({reducer:M}),G=n(0),J=(n(22),n(23),n(24),function(t){return t.users}),X=function(t){return t.posts},Y=function(t){return t.comments},B=function(t){return t.selectedUserId},H=function(t){return t.selectedPostId},z=function(t){return t.isLoading},K=function(t){return t.posttitle},Q=n(1),V=function(){var t=Object(a.b)(),e=Object(a.c)(B),n=Object(a.c)(H),c=Object(a.c)(X),r=function(){var n=Object(o.a)(u.a.mark((function n(){var c;return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,j(e);case 2:c=n.sent,t(P(c)),t(D(!1));case 5:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();return Object(G.useEffect)((function(){r()}),[e]),Object(G.useEffect)((function(){t(R())}),[]),Object(Q.jsx)("div",{className:"PostsList",children:Object(Q.jsxs)(Q.Fragment,{children:[Object(Q.jsx)("h2",{children:"Posts:"}),Object(Q.jsx)("ul",{className:"PostsList__list","data-cy":"postDetails",children:c.map((function(e){return Object(Q.jsxs)("li",{className:"PostsList__item",children:[Object(Q.jsxs)("div",{children:[Object(Q.jsxs)("b",{children:["[User"," ",e.userId,"]:"," "]}),e.body]}),Object(Q.jsxs)("div",{className:"PostsList__buttonbox",children:[Object(Q.jsx)("button",{type:"button",className:"PostsList__button button",onClick:function(){n===e.id?t(I(void 0)):(t(I(e.id)),t(F(e.id))),t(D(!0))},children:n===e.id?"Close":"Open"}),Object(Q.jsx)("button",{type:"button",className:"PostsList__button button",onClick:Object(o.a)(u.a.mark((function n(){return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,v(e.id);case 2:t(R());case 3:case"end":return n.stop()}}),n)}))),children:"X"})]})]},e.id)}))})]})})},W=n(6),Z=(n(26),function(){var t=Object(a.b)(),e=Object(a.c)(Y),n=Object(a.c)(H),c=Object(G.useState)(""),r=Object(W.a)(c,2),s=r[0],i=r[1],d=Object(G.useState)(""),p=Object(W.a)(d,2),l=p[0],b=p[1],f=Object(G.useState)(""),j=Object(W.a)(f,2),m=j[0],O=j[1],h=Object(G.useState)(!1),x=Object(W.a)(h,2),_=x[0],v=x[1],S=function(){var c=Object(o.a)(u.a.mark((function c(r){return u.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:e&&(L(r.name,r.email,r.body,r.postId),t(F(n)));case 1:case"end":return c.stop()}}),c)})));return function(t){return c.apply(this,arguments)}}();return Object(Q.jsxs)("form",{className:"NewCommentForm",onSubmit:function(t){(t.preventDefault(),s&&l&&m&&e)?(S({postId:n,name:s,email:l,body:m}),v(!1),i(""),b(""),O("")):v(!0)},children:[Object(Q.jsx)("div",{className:"form-field",children:Object(Q.jsx)("input",{type:"text",name:"name",required:!0,placeholder:"Your name",value:s,className:"NewCommentForm__input",onChange:function(t){i(t.target.value)}})}),Object(Q.jsx)("div",{className:"form-field",children:Object(Q.jsx)("input",{type:"email",name:"email",required:!0,placeholder:"Your email",className:"NewCommentForm__input",value:l,onChange:function(t){b(t.target.value)}})}),Object(Q.jsx)("div",{className:"form-field",children:Object(Q.jsx)("textarea",{name:"body",placeholder:"Type comment here",className:"NewCommentForm__input",required:!0,value:m,onChange:function(t){O(t.target.value)}})}),_&&Object(Q.jsx)("div",{style:{color:"red"},children:"Add correct data"}),Object(Q.jsx)("button",{type:"submit",className:"NewCommentForm__submit-button button",children:"Add a comment"})]})}),$=(n(27),function(){var t=Object(a.b)(),e=Object(a.c)(K),n=Object(a.c)(Y),c=Object(a.c)(H),r=Object(G.useState)(!1),s=Object(W.a)(r,2),i=s[0],d=s[1],p=function(){var e=Object(o.a)(u.a.mark((function e(){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!c){e.next=5;break}return e.next=3,O(c);case 3:n=e.sent,t(A(n.title));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),l=function(){var e=Object(o.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t(F(c));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),b=function(){var t=Object(o.a)(u.a.mark((function t(e){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=4;break}return t.next=3,N(e);case 3:l();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(G.useEffect)((function(){t(D(!0)),p(),t(D(!1)),t(D(!0)),l(),t(D(!1))}),[n]),Object(Q.jsxs)("div",{className:"PostDetails",children:[Object(Q.jsx)("h2",{children:"Post details:"}),0!==c&&Object(Q.jsxs)(Q.Fragment,{children:[Object(Q.jsx)("section",{className:"PostDetails__post",children:Object(Q.jsx)("p",{children:e})}),Object(Q.jsxs)("section",{className:"PostDetails__comments",children:[Object(Q.jsx)("button",{type:"button",className:"button",onClick:function(){d(!i)},children:n&&(i?"Show ".concat(n.length," comments"):"Hide ".concat(n.length," comments"))}),Object(Q.jsx)("ul",{className:i?"PostDetails__visiblelist":"PostDetails__list",children:n&&n.map((function(t){return Object(Q.jsxs)("li",{className:"PostDetails__list-item",children:[Object(Q.jsx)("button",{type:"button",className:"PostDetails__remove-button button",onClick:function(){b(t.id)},children:"X"}),Object(Q.jsx)("p",{children:t.body})]},t.id)}))})]}),Object(Q.jsx)("section",{children:Object(Q.jsx)("div",{className:"PostDetails__form-wrapper",children:Object(Q.jsx)(Z,{})})})]})]})}),tt=(n(28),function(){return Object(Q.jsx)("div",{className:"Loader",children:Object(Q.jsx)("div",{className:"Loader__content"})})}),et=function(){var t=Object(a.b)(),e=Object(a.c)(J),n=Object(a.c)(z),c=Object(a.c)(B);return Object(G.useEffect)((function(){t(U())}),[]),Object(Q.jsxs)("div",{className:"App",children:[Object(Q.jsx)("header",{className:"App__header",children:Object(Q.jsxs)("label",{children:["Select a user: \xa0",Object(Q.jsxs)("select",{className:"App__user-selector",value:c,onChange:function(e){t(g(e.target.value)),t(D(!0))},children:[Object(Q.jsx)("option",{value:"0",disabled:!0,children:"All users"}),e.map((function(t){return Object(Q.jsx)("option",{value:"".concat(t.id),children:t.name},t.id)}))]})]})}),Object(Q.jsxs)("main",{className:"App__main",children:[Object(Q.jsxs)("div",{className:"App__sidebar",children:[n&&Object(Q.jsx)(tt,{}),Object(Q.jsx)(V,{})]}),Object(Q.jsx)("div",{className:"App__content",children:Object(Q.jsx)($,{})})]})]})},nt=function(){return Object(Q.jsx)(a.a,{store:q,children:Object(Q.jsx)(s.a,{children:Object(Q.jsx)(et,{})})})};r.a.render(Object(Q.jsx)(nt,{}),document.getElementById("root"))}},[[29,1,2]]]);
//# sourceMappingURL=main.af8943b8.chunk.js.map